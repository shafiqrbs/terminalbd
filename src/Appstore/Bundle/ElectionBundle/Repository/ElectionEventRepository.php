<?php

namespace Appstore\Bundle\ElectionBundle\Repository;
use Appstore\Bundle\DomainUserBundle\Entity\Customer;
use Appstore\Bundle\ElectionBundle\Entity\ElectionEvent;
use Appstore\Bundle\ElectionBundle\Entity\ElectionEventMember;
use Appstore\Bundle\HospitalBundle\Entity\Invoice;
use Appstore\Bundle\InventoryBundle\Entity\Sales;
use Doctrine\ORM\EntityRepository;
use Setting\Bundle\ToolBundle\Entity\GlobalOption;

/**
 * CustomerRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ElectionEventRepository extends EntityRepository
{
	public function getMemberLists(ElectionEvent $committee)
	{
		$entities = $committee->getEventMembers();
		$data = '';
		$i = 1;

		/* @var $entity ElectionEventMember */

		foreach ($entities as $entity) {
			$data .= "<tr id='remove-{$entity->getId()}'>";
			$data .= "<td>{$i}.</td>";
			$data .= "<td>{$entity->getName()}</td>";
			$data .= "<td>{$entity->getDesignation()}</td>";
			$data .= "<td><a href='tel:+88 {$entity->getMobile()}'>{$entity->getMobile()}</a></td>";
			$data .= "<td>{$entity->getDescription()}</td>";
			$data .= "<td><a data-id='{$entity->getId()}' data-url='/election/event/{$entity->getId()}/member-delete' href='javascript:' class='btn red mini delete' ><i class='icon-trash'></i></a></td>";
			$data .= '</tr>';
			$i++;
		}
		return $data;
	}
}
