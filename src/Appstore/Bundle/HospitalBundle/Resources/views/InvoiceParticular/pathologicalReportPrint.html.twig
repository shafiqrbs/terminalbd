{% extends '::print.html.twig' %}
{% block body %}
    <script>
        window.print();
    </script>
    <table class="table" style="margin-top:{{  entity.hmsInvoice.hospitalConfig.printMarginReportTop }}px;margin-left:{{ entity.hmsInvoice.hospitalConfig.printMarginReportLeft }}px;">
    <tr>
            <td>
                <div class="span4  pull-left invoice-logo-space">
                    {% if entity.hmsInvoice.hospitalConfig.globalOption.templateCustomize.webPath('logo') is not empty %}   <img style="max-width: 180px; max-height: 60px" src="/{{ entity.hmsInvoice.hospitalConfig.globalOption.templateCustomize.webPath('logo') }}">{% endif %}
                </div>
            </td>
            <td class="pull-right">
                <div class="span4">
                    <ul class="unstyled">
                        <li><strong>{{ entity.hmsInvoice.hospitalConfig.globalOption.name }}</strong></li>
                        <li><i class="icon-phone"></i>&nbsp;{{ entity.hmsInvoice.hospitalConfig.globalOption.mobile }}</li>
                        {% if  entity.hmsInvoice.hospitalConfig.globalOption.email is not empty %}<li><i class="icon-envelope"></i>&nbsp;{{ entity.hmsInvoice.hospitalConfig.globalOption.email }}</li>{% endif %}
                        {% if  entity.hmsInvoice.hospitalConfig.globalOption.contactPage.address1 %}<li><i class="icon-home"></i>&nbsp;{{ entity.hmsInvoice.hospitalConfig.globalOption.contactPage.address1 }}</li>{% endif %}
                        {% if entity.hmsInvoice.hospitalConfig.globalOption.domain is not empty %}<li><i class="icon-link"></i>&nbsp;www.{{ entity.hmsInvoice.hospitalConfig.globalOption.domain }}</li>{% endif %}
                    </ul>
                </div>
            </td>
        </tr>
    </table>
    <table class="table table-border" >
        <tr class="print-header">
            <th colspan="2">
                <span class="barcode-left">{{ barcodeInvoice|raw }}</span>
                <strong class="title title-center" >{{ entity.particular.category.name }} REPORT</strong>
                <span class="barcode-right">{{ barcodeReport|raw }}</span>
            </th>
        </tr>
        <tr>
            <td>
                <ul class="unstyled">
                    <li>Invoice No :&nbsp;<strong>{{ entity.hmsInvoice.invoice }}</strong></li>
                    <li>Patient Name : <strong>{{ entity.hmsInvoice.customer.name }}</strong></li>
                    <li>Investigation : {{ entity.particular.name }}</li>
                    <li>Sepcimen/Sample : {{ entity.particular.sepcimen }}</li>
                    <li>Ref. By : {% if entity.hmsInvoice.referredDoctor is not empty %}<strong>{{ entity.hmsInvoice.referredDoctor.name }}</strong>{% endif %}</li>
                </ul>
            </td>

            <td class="pull-right">
                <ul class="unstyled">
                    <li>Report No : {{ entity.particular.particularCode }}-{{ entity.reportCode }}</li>
                    <li>Invoice Date : {{ entity.hmsInvoice.updated|date('d-m-Y') }}</li>
                    <li>Delivery Date : {{ entity.hmsInvoice.deliveryDateTime }}</li>
                    <li>Coll. Time : {{ entity.collectionDate|date('d-m-Y h:i:s A') }}</li>
                    <li>Coll. By : {{ entity.sampleCollectedBy }}</li>
                </ul>
            </td>
            <td class="pull-right">
                <ul class="unstyled">
                    <li>Age : {{ entity.hmsInvoice.customer.age }} {{ entity.hmsInvoice.customer.ageType }}</li>
                    <li>Gender: {{ entity.hmsInvoice.customer.gender }} </li>
                    <li>Blood Group: {{ entity.hmsInvoice.customer.bloodGroup }} </li>
                    <li>Contact No: {{ entity.hmsInvoice.customer.mobile }}</li>
                    <li>Bed No: </li>
                </ul>
            </td>

        </tr>
    </table>

    {% if entity.particular.pathologicalReports is defined and  entity.particular.pathologicalReports is not empty  %}
        <table class="table table-bordered table-striped">
            <thead class="flip-content ">
            <tr class="head-black">
                <th class="numeric">Name</th>
                <th class="numeric text-right">Result</th>
                <th class="numeric">Unit</th>
                <th class="numeric">Reference</th>
            </tr>
            </thead>
            <tbody>
            {% for item in entity.particular.pathologicalReports %}
                {% if item.children is not empty %}
                    <tr id="remove-{{ item.id }}">
                        <td  class="numeric" colspan="5"><strong>{{ item.name }}</strong></td>
                    </tr>
                    {% for child in item.children %}
                        <tr>
                            <td  class="numeric">{{ child.name }}</td>
                            <td class="">{% if report is not empty and report[child.id] is defined and report[child.id] is not empty %}{{ report[child.id].result }}{% endif %}</td>
                            <td class="numeric">{{ child.unit }}</td>
                            <td class="numeric">{{ child.referenceValue }}</td>
                        </tr>
                    {% endfor %}
                {% elseif item.parent is empty %}
                    <tr id="remove-{{ item.id }}">
                        <td  class="numeric">{{ item.name }}</td>
                        <td class="">{% if item.children is empty %}{% if report is not empty and report[item.id] is defined and report[item.id] is not empty %}{{ report[item.id].result }}{% endif %}{% endif %}</td>
                        <td class="numeric">{{ item.unit }}</td>
                        <td class="numeric">{{ item.referenceValue }}</td>
                    </tr>
                {% endif %}
            {% endfor %}

            </tbody>
            <tfoot>
            {% for meta in entity.invoicePathologicalReports %}
                {% if meta.metaValue is not empty %}
                    <tr><td class="numeric">{{ meta.metaKey }}</td><td colspan="3">{{ meta.metaValue|raw }}</td></tr>
                {% endif %}
            {% endfor %}
            <tr><td class="numeric">Comment</td><td colspan="3"> {{ entity.comment|raw }}</td></tr>
            </tfoot>
         </table>
    {% endif %}
    <table class="table print-footer" style="position:fixed; bottom:30px;" >
        <tr>
            <td class="left span4">
                <ul class="unstyled">
                    <li>Prepared By</li>
                    <li><strong>{{ entity.particularPreparedBy.profile.name }}</strong></li>
                    <li>{% if entity.particularPreparedBy.profile.designation is not empty %}{{ entity.particularPreparedBy.profile.designation.name }}{% endif %}</li>
                  </ul>
            </td>
            <td class="center span4">
                <ul class="unstyled">
                    <li>Printed By</li>
                    <li><strong>{{ printUser.profile.name }}</strong></li>
                    <li>{% if entity.particularPreparedBy.profile.designation is not empty %}{{ printUser.profile.designation.name }}{% endif %}</li>
                  </ul>
            </td>
            <td class="right span4">
                {% if entity.assignDoctor is not empty %}
                <ul class="unstyled">
                    <li><strong>{{ entity.assignDoctor.name }}{{ entity.assignDoctor.id }}</strong></li>
                    <li>{{ entity.assignDoctor.educationalDegree|raw }}</li>
                    <li>{{ entity.assignDoctor.specialist|raw }}</li>
                    <li>{{ entity.assignDoctor.category.name }},{{ entity.assignDoctor.department.name }}</li>
                    <li>{{ entity.assignDoctor.designation }}</li>
                    <li>{{ entity.assignDoctor.currentJob }}</li>
                </ul>
                {% endif %}
            </td>
        </tr>
    </table>
 <style>

     table.table-border{
         border: 1px solid #c0c5c9!important;
     }
     .print-header{
         border: 1px solid #c0c5c9!important;
     }
     .head-black{
         border: 1px solid #c0c5c9!important;
     }
     .table-bordered tr td{
         border: 1px solid #c0c5c9!important;
     }
 </style>
{% endblock %}
{% block cssBlock %}
    {% stylesheets filter='cssrewrite'
    '@HospitalBundle/Resources/public/css/print.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock  %}
{% block documentready %}
    {{ parent() }}
{% endblock %}