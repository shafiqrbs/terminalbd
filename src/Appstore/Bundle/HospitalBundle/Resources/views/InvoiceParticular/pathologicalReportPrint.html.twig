{% extends '::print.html.twig' %}

{% block body %}
    <style>
        .print-header .title-center{
            float: none!important;
            text-align: center;
            text-transform: uppercase;
        }
        .print-header .barcode-left{
            float: left;
            padding-left: 10px;
        }
        .print-header .barcode-right{
            float: right;
            padding-right: 10px;
        }
         .print-footer .left{
            margin-left: 30px;
        }
        .print-footer .center{
            text-align: center;
        }
        .print-footer .right{
            float: right;
            padding-right:30px;
        }

        .table thead tr th.text-right , .table-bordered tr td.text-right{
            text-align:right!important;
        }
        .text-center{
            text-align:center!important;
        }

        .span4 {
            width: 31.623931623931625%;
        }


    </style>
    <table class="table">
        <tr>
            <td>
                <div class="span4  pull-left invoice-logo-space">
                    {% if entity.hmsInvoice.hospitalConfig.globalOption.templateCustomize.webPath('logo') is not empty %}   <img style="max-width: 180px; max-height: 60px" src="/{{ entity.hmsInvoice.hospitalConfig.globalOption.templateCustomize.webPath('logo') }}">{% endif %}
                </div>
            </td>
            <td class="pull-right">
                <div class="span4">
                    <ul class="unstyled">
                        <li><strong>{{ entity.hmsInvoice.hospitalConfig.globalOption.name }}</strong></li>
                        <li><i class="icon-phone"></i>&nbsp;{{ entity.hmsInvoice.hospitalConfig.globalOption.mobile }}</li>
                        {% if  entity.hmsInvoice.hospitalConfig.globalOption.email is not empty %}<li><i class="icon-envelope"></i>&nbsp;{{ entity.hmsInvoice.hospitalConfig.globalOption.email }}</li>{% endif %}
                        {% if  entity.hmsInvoice.hospitalConfig.globalOption.contactPage.address1 %}<li><i class="icon-home"></i>&nbsp;{{ entity.hmsInvoice.hospitalConfig.globalOption.contactPage.address1 }}</li>{% endif %}
                        {% if entity.hmsInvoice.hospitalConfig.globalOption.domain is not empty %}<li><i class="icon-link"></i>&nbsp;www.{{ entity.hmsInvoice.hospitalConfig.globalOption.domain }}</li>{% endif %}
                    </ul>
                </div>
            </td>
        </tr>
    </table>
    <table class="table table-border" >
        <tr class="print-header">
            <th colspan="2">
                <span class="barcode-left">{{ barcodeInvoice|raw }}</span>
                <strong class="title title-center" >{{ entity.particular.category.name }} REPORT</strong>
                <span class="barcode-right">{{ barcodeReport|raw }}</span>
            </th>
        </tr>
        <tr>
            <td>
                <ul class="unstyled">
                    <li>Invoice No :&nbsp;<strong>{{ entity.hmsInvoice.invoice }}</strong> Reg No.</li>
                    <li>Patient Name : <strong>{{ entity.hmsInvoice.customer.name }}</strong></li>
                    <li>Investigation : {{ entity.particular.name }}</li>
                    <li>Sepcimen/Sample : {{ entity.particular.sepcimen }}</li>
                    <li>Ref. By : <strong>{{ entity.hmsInvoice.referredDoctor.name }}</strong></li>
                </ul>
            </td>

            <td class="pull-right">
                <ul class="unstyled">
                    <li>Report No : {{ entity.hmsInvoice.invoice }}-{{ entity.particular.particularCode }}</li>
                    <li>Invoice Date : {{ entity.hmsInvoice.updated|date('d-m-Y') }}</li>
                    <li>Delivery Date : {{ entity.hmsInvoice.deliveryDateTime }}</li>
                    <li>Coll. Time : {{ entity.collectionDate|date('d-m-Y h:i:s A') }}</li>
                    <li>Coll. By : {{ entity.sampleCollectedBy }}</li>
                </ul>
            </td>
            <td class="pull-right">
                <ul class="unstyled">
                    <li>Age : {{ entity.hmsInvoice.customer.age }} {{ entity.hmsInvoice.customer.ageType }}</li>
                    <li>Gender: {{ entity.hmsInvoice.customer.gender }} </li>
                    <li>Blood Group: {{ entity.hmsInvoice.customer.bloodGroup }} </li>
                    <li>Contact No: {{ entity.hmsInvoice.customer.mobile }}</li>
                    <li>Bed No: </li>
                </ul>
            </td>

        </tr>
    </table>

    {% if entity.particular.pathologicalReports is defined and  entity.particular.pathologicalReports is not empty  %}
        <table class="table table-bordered table-striped">
            <thead class="flip-content ">
            <tr class="head-black">
                <th class="numeric">Name</th>
                <th class="numeric text-right">Result</th>
                <th class="numeric">Unit</th>
                <th class="numeric">Reference</th>
            </tr>
            </thead>
            <tbody>
            {% for item in entity.particular.pathologicalReports %}
                <tr>
                    <td  class="numeric">{{ item.name }}</td>
                    <td class="numeric text-right">{% if item.children is empty %}{% if report is not empty and report[item.id] is defined and report[item.id] is not empty %}{{ report[item.id].result }}{% endif %}{% endif %}</td>
                    <td class="numeric">{{ item.unit }}</td>
                    <td class="numeric">{{ item.referenceValue }}</td>
                </tr>
            {% endfor %}
            </tbody>
         </table>
    {% endif %}
    <table class="table print-footer" style="position:fixed; bottom:30px" >
        <tr>
            <td class="left span4">
                <ul class="unstyled">
                    <li>Prepared By</li>
                    <li><strong>{{ entity.particularPreparedBy }}</strong></li>
                  </ul>
            </td>
            <td class="center span4">
                {#<ul class="unstyled">
                    <li>Prepared By</li>
                    <li><strong>{{ entity.particularPreparedBy }}</strong></li>
                  </ul>#}
            </td>
            <td class="right span4">
                <ul class="unstyled">
                    <li><strong>{{ entity.assignDoctor.name }}{{ entity.assignDoctor.id }}</strong></li>
                    <li>{{ entity.assignDoctor.educationalDegree|raw }}</li>
                    <li>{{ entity.assignDoctor.specialist|raw }}</li>
                    <li>{{ entity.assignDoctor.category.name }},{{ entity.assignDoctor.department.name }}</li>
                    <li>{{ entity.assignDoctor.designation }}</li>
                    <li>{{ entity.assignDoctor.currentJob }}</li>
                </ul>
            </td>

        </tr>
    </table>
{#
    <div class="row-fluid">
        <div class="span12">

            <div class="portlet box green tabbable">
                <div class="portlet-title">
                    <div class="caption"><i class="icon-reorder"></i>Pathological Report Prepared</div>
                    <div class="actions">
                        <div class="btn-group">
                            <a href="{{ path('hms_invoice_particular_show',{'id':entity.id}) }}" class="btn" ><i class="icon-backward"></i>&nbsp;Back To Show</a>
                        </div>
                    </div>
                </div>


                <div class="portlet-body">
                    <div class="portlet-body form">
                        <div class="row-fluid">

                            <div class="span4">
                                <h4>About:</h4>
                                <ul class="unstyled">
                                    <li><strong>Customer #:</strong>&nbsp;{{ entity.hmsInvoice.customer.name }}</li>
                                    <li><strong>Mobile #:</strong>&nbsp;{{ entity.hmsInvoice.customer.mobile }}</li>
                                    <li><strong>Gender #:</strong>&nbsp;{{ entity.hmsInvoice.customer.gender }}</li>
                                    <li><strong>Age #:</strong>&nbsp;{{ entity.hmsInvoice.customer.age }}-{{ entity.hmsInvoice.customer.ageType }}</li>
                                </ul>
                            </div>
                            <div class="span4">
                                <h4>Invoice:</h4>
                                <ul class="unstyled">
                                    <li><strong>Invoice #:</strong>&nbsp;{{ entity.hmsInvoice.invoice }}</li>
                                    <li><strong>Created #:</strong>&nbsp;{{ entity.hmsInvoice.created|date('d-m-Y') }}</li>
                                    <li><strong>Delivery #:</strong>&nbsp;{{ entity.hmsInvoice.deliveryDateTime }}</li>
                                </ul>
                            </div>
                            <div class="span4">
                                <h4>Referred By:</h4>
                                {% if entity.hmsInvoice.referredDoctor is not empty %}
                                    <ul class="unstyled">
                                        <li><strong>Code:</strong>&nbsp;{{ entity.hmsInvoice.referredDoctor.particularCode }}</li>
                                        <li><strong>Name:</strong>&nbsp;{{ entity.hmsInvoice.referredDoctor.name }}</li>
                                        <li><strong>Mobile:</strong>&nbsp;{{ entity.hmsInvoice.referredDoctor.mobile }}</li>
                                        <li><strong>Address:</strong>&nbsp;{{ entity.hmsInvoice.referredDoctor.address }}</li>
                                    </ul>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row-fluid" >
                            <div class="span12">
                                <h4>Particular:</h4>
                                <ul class="unstyled">
                                    <li><strong>Particular #:</strong>&nbsp;{{ entity.particular.name }}</li>
                                    <li><strong>Category #:</strong>&nbsp;{{ entity.particular.category.name }}</li>
                                    <li><strong>Instruction #:</strong>&nbsp;{{ entity.particular.instruction }}</li>
                                </ul>
                            </div>

                        </div>
                        {% include('flash-message.html.twig')  %}

                        <!-- BEGIN FORM-->
                        {% if entity.particular.pathologicalReports is defined and  entity.particular.pathologicalReports is not empty  %}

                            <div class="form-actions portlet box blue">
                                <div class="portlet-title">
                                    <div class="caption"><i class="icon-reorder"></i>Report Format</div>
                                </div>
                            </div>
                            <div class="clearfix">&nbsp;</div>
                            <div class="row-fluid box green">
                                <table class="table table-bordered table-striped table-condensed flip-content ">
                                    <thead class="flip-content ">
                                    <tr class="head-green">
                                        <th class="numeric">Si/No</th>
                                        <th class="numeric">Name</th>
                                        <th class="numeric">Parent</th>
                                        <th class="numeric">Result</th>
                                        <th class="numeric">Unit</th>
                                        <th class="numeric">Reference</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for item in entity.particular.pathologicalReports %}
                                        <tr id="remove-{{ item.id }}">
                                            <td  class="numeric">{{ loop.index }}</td>
                                            <td  class="numeric">{{ item.name }}</td>
                                            <td  class="numeric">{% if item.parent is not empty %}{{ item.parent.name }}{% endif %}</td>
                                            <td class="">{% if item.children is empty %}<input type="text" name="result" class="m-wrap span12" value="{% if report is not empty and report[item.id] is defined and report[item.id] is not empty %}{{ report[item.id].result }}{% endif %}" >{% endif %}</td>
                                            <td class="numeric">{{ item.unit }}</td>
                                            <td class="numeric">{{ item.referenceValue }}</td>
                                            <input type="hidden" name="pathologicalReportId[]" value="{{ item.id }}" >
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% endif %}
                        <div class="form-actions portlet box green">
                            <div class="portlet-title">
                                <div class="caption"><i class="icon-reorder"></i>Additional Field & Value</div>
                                <a href="javascript:" class="btn purple pull-right mini addMore"><i class="icon-plus"></i></a>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                        <div class="row-fluid clone-block" id="clone-block">
                            <div class="clone">
                                <div class="span3 ">
                                    <div class="control-group">
                                        <input type="hidden" name="metaId[]" value="" >
                                        <input type="text" name="metaKey[]" class="m-wrap span12" placeholder="Label name" value="">
                                    </div>
                                </div>
                                <div class="span8">
                                    <div class="control-group">
                                        <textarea name="metaValue[]" class="m-wrap span12" placeholder="Label value"></textarea>
                                    </div>
                                </div>
                                <div class="span1">
                                    <a href="javascript:"  class="btn red  remove hidden mini"><i class="icon-trash"></i></a>
                                </div>
                            </div>
                        </div>
                        {% if  entity.invoicePathologicalReports is defined and entity.invoicePathologicalReports is not empty %}
                            {% for meta in entity.invoicePathologicalReports %}
                                {% if meta.metaValue is not empty %}
                                    <div class="row-fluid trash" id="remove-{{ meta.id }}"  >
                                        <div class="span3 ">
                                            <div class="control-group">
                                                <input type="hidden" name="metaId[]" value="{{ meta.id }}" >
                                                <input type="text" name="metaKey[]" class="m-wrap span12" placeholder="Label name" value="{{ meta.metaKey }}">
                                            </div>
                                        </div>
                                        <div class="span8">
                                            <div class="control-group">
                                                <textarea  name="metaValue[]" class="m-wrap span12" placeholder="Label value">{{ meta.metaValue }}</textarea>
                                            </div>
                                        </div>
                                        <div class="span1">
                                            <a href="javascript:" id="{{ meta.id }}"  data-url="{{ path('hms_invoice_pathological_report_delete',{'id':meta.id}) }}" class="btn red  remove mini"><i class="icon-trash"></i></a>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                        <div class="clearfix">&nbsp;</div>
                        <div class="form-actions portlet box blue">
                            <div class="portlet-title">
                                <div class="caption"><i class="icon-reorder"></i>Remark & Status</div>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                        <div class="row-fluid">
                            <!--/span-->
                            <div class="span8">
                                <div class="control-group">
                                    <label class="control-label" for="name">Assign Doctor: {{ entity.assignDoctor.name }} </label>

                                </div>
                            </div>
                            <div class="span4">
                                <div class="control-group">
                                    <label class="control-label" for="name">Process Progress {{ entity.process }} </label>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <!--/span-->
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label" for="name">Comment {{ entity.comment }}</label>
                                    <div class="controls">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions portlet box grey">
                            <div class="pull-right">
                                <a href="{{ path('hms_invoice_particular_report', {'id': entity.id}) }}"  class="btn blue"><i class="icon-print"></i> Print</a>
                            </div>
                        </div>
                        <!-- END FORM-->
                    </div>
                </div>
            </div>

        </div>
    </div>#}
{% endblock %}
{% block documentready %}
    {{ parent() }}
{% endblock %}