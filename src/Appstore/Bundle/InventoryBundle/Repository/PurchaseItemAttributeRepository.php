<?php

namespace Appstore\Bundle\InventoryBundle\Repository;
use Appstore\Bundle\InventoryBundle\Entity\InventoryConfig;
use Appstore\Bundle\InventoryBundle\Entity\Purchase;
use Appstore\Bundle\InventoryBundle\Entity\PurchaseItem;
use Appstore\Bundle\InventoryBundle\Entity\PurchaseItemAttribute;
use Appstore\Bundle\InventoryBundle\Entity\PurchaseVendorItem;
use Doctrine\ORM\EntityRepository;
use Setting\Bundle\ToolBundle\Entity\GlobalOption;

/**
 * PurchaseItemRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class PurchaseItemAttributeRepository extends EntityRepository
{

    public function insertPurchaseItemAttribute($purchase,$data){

        $em = $this->_em;
        $i = 0;
        foreach($data['quantity'] as $row ){

            $entity = new PurchaseItemAttribute();
            $entity->setPurchase($purchase);
            $entity->setName($data['vendorItemName'][$i]);
            $entity->setQuantity($data['quantity'][$i]);
            $entity->setPurchasePrice($data['purchasePrice'][$i]);
            $entity->setSalesPrice($data['salesPrice'][$i]);
            $entity->setWebPrice($data['webPrice'][$i]);
            $em->persist($entity);
            $i++;
        }
        $em->flush();
    }

}
