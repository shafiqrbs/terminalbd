{% extends ':frontend/template:ecommerce-base.html.twig' %}
{% block body %}
    <div class="clearfix"></div>
    {% if globalOption.templateCustomize.breadcrumb == 1 and globalOption.templateCustomize.breadcrumbPosition == 'flat-left'  %}
        <div class="pageheader">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <ul class="simple-breadcrumb-left">
                            <li class=""><span class="glyphicon glyphicon-home"></span>&nbsp;<a class="home" href="{{ path(globalOption.subDomain ~ '_ecommercesubdomain') }}">{% if globalOption.templateCustomize.siteLanguage == 'bangoli' %} হোম {% else %}Home{% endif %}</a></li>
                            <li class="active">Shopping Cart</li>
                        </ul>
                    </div>
                    <div class="col-md-6 text-right">
                        <h2 class="title">Shopping Cart</h2>
                    </div>
                </div>
            </div>
        </div>
    {% elseif globalOption.templateCustomize.breadcrumb == 1 and globalOption.templateCustomize.breadcrumbPosition == 'flat-right'  %}
        <div class="pageheader">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h2 class="title">Shopping Cart</h2>
                    </div>
                    <div class="col-md-6">
                        <ul class="simple-breadcrumb-right">
                            <li class="active">Shopping Cart</li>
                            <li class=""><span class="glyphicon glyphicon-home"></span>&nbsp;<a class="home" href="{{ path(globalOption.subDomain ~ '_ecommercesubdomain') }}">{% if globalOption.templateCustomize.siteLanguage == 'bangoli' %} হোম {% else %}Home{% endif %}</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    {% elseif globalOption.templateCustomize.breadcrumb == 1 and globalOption.templateCustomize.breadcrumbPosition == 'center'  %}

        <div class="pageheader">
            <div class="container">
                <div class="col-md-12 text-center">
                    <h2 class="title">Shopping Cart</h2>
                    <p><span class="glyphicon glyphicon-home"></span>&nbsp;<a class="home" href="{{ path(globalOption.subDomain ~ '_ecommercesubdomain') }}">{% if globalOption.templateCustomize.siteLanguage == 'bangoli' %} হোম {% else %}Home{% endif %}</a> &nbsp;&nbsp;<i class="fa fa-angle-right"></i> &nbsp;&nbsp;Shopping Cart</p>
                </div>
            </div>
        </div>
    {% elseif globalOption.templateCustomize.breadcrumb == 1 and globalOption.templateCustomize.breadcrumbPosition == 'left'  %}
        <div class="pageheader">
            <div class="container">
                <div class="col-md-12 text-left">
                    <h2 class="title">Shopping Cart</h2>
                    <p><span class="glyphicon glyphicon-home"></span>&nbsp;<a class="home" href="{{ path(globalOption.subDomain ~ '_ecommercesubdomain') }}">{% if globalOption.templateCustomize.siteLanguage == 'bangoli' %} হোম {% else %}Home{% endif %}</a> &nbsp;&nbsp;<i class="fa fa-angle-right"></i> &nbsp;&nbsp; Shopping Cart</p>
                </div>
            </div>
        </div>
    {% endif %}
    <div class="clearfix"></div>

    <div class="clearfix"></div>
    {% if globalOption.featureWidgets is defined and globalOption.featureWidgets is not empty and menu.getFeatureWidgetPositionExist('body-top') %}
        {% render controller("FrontendBundle:EcommerceWidget:featureTemplateWidget",{'globalOption':globalOption.id,'menu': menu.id,'position':'body-top'}) %}
    {% endif %}
    <div class="clearfix"></div>
    {% if menu.featureWidgets is defined and menu.featureWidgets is not empty and menu.getFeatureWidgetPositionExist('body-top') %}
        {% render controller("FrontendBundle:WebsiteWidget:featureWidget",{'globalOption':globalOption.id, 'menu':menu.id,'position':'body-top'}) %}
    {% endif %}
    <div class="clearfix"></div>
    <section>
        <div class="clearfix"></div>
        <div class="container" style="margin-top: 30px">
            <form class="" action="{{ path('order_checkout',{'shop':globalOption.uniqueCode}) }}" method="post">
                <div class="row">
                    <div class="col-sm-12 col-md-12">
                        <table class="table table-hover table-striped table-bordered table-list">
                            <thead>
                            <tr style="background-color:#269abc; color:#ffffff">
                                <th>Product Name</th>
                                <th class="text-center">Price(MRP)</th>
                                <th>Quantity</th>
                                <th class="text-left">SubTotal</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for product in cart.contents %}

                                <tr>
                                    <td class="col-sm-6 col-md-6">
                                        <div class="media">
                                            {% if product.productImg is not empty %}
                                                <a class="pull-left" href="javascript:"> <img class="media-object" src="{{ product.productImg }}"></a>
                                            {% else %}
                                                <a class="pull-left" href="javascript:"> <img class="media-object" src="{{ asset('assets/img/product-icon.png') }}"></a>
                                            {% endif %}
                                            <div class="media-body">
                                                <h5 class="media-heading">{{ product.name }}</h5>
                                                {% if product.brand is not empty %}<h5 class="media-heading"> by {{ product.brand }}</h5>{% endif %}
                                                <span>Status: </span><span class="text-success"><strong>In Stock</strong></span>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="col-sm-1 col-md-1 text-center">
                                        <strong>{{ globalOption.ecommerceConfig.currency }}
                                            &nbsp;{{ product.price }}</strong></td>
                                    <td class="col-sm-3 col-md-3 text-center">
                                        <form class="addCart">
                                            <div class="input-group">
                                            <span class="input-group-btn">
                                               <button type="button" class="btn gray-dark-bg btn-number-cart"
                                                       data-type="minus" data-field="quantity" data-id="{{ product.rowid }}"
                                                       data-url="{{ path(globalOption.subDomain ~ '_webservice_product_medicine_cart_update',{'cartid': product.rowid}) }}"
                                                       data-text="{{ product.id }}" data-title="{{ product.price }}">
                                                        <span class="glyphicon glyphicon-minus"></span>
                                               </button>
                                            </span>
                                            <input type="text" name="quantity" id="quantity-{{ product.rowid }}"
                                                       class="form-control input-number" value="{{ product.quantity }}"
                                                       min="1" max="100" style="width: 75px!important;">
                                                <span class="input-group-btn">
                                              <button type="button" class="btn gray-dark-bg btn-number-cart"
                                                      data-type="plus" data-field="quantity"
                                                      data-id="{{ product.rowid }}"
                                                      data-url="{{ path(globalOption.subDomain ~ '_webservice_product_medicine_cart_update',{'cartid': product.rowid}) }}"
                                                      data-text="{{ product.id }}" data-title="{{ product.price }}">
                                                      <span class="glyphicon glyphicon-plus"></span>
                                              </button>
                                            </span>
                                                {% if product.productUnit is not empty %}
                                                    <span class="input-group-btn">
                                                        <button type="button"  class="btn btn-warning">{{ product.productUnit }}</button>
                                                    </span>
                                                {% endif %}
                                            <span class="input-group-btn">
                                                <button id="{{ product.rowid }}"
                                                        data-url="{{ path(globalOption.subDomain ~ '_webservice_product_cart_remove',{'cartid':product.rowid}) }}"
                                                        class="btn btn-danger hunger-remove-cart">
                                                    <span class="glyphicon glyphicon-trash"></span>
                                                </button>
                                            </span>

                                            </div>
                                        </form>
                                    </td>
                                    <td class="col-sm-1 col-md-1 text-left">
                                        {{ globalOption.ecommerceConfig.currency }} <strong
                                                id="btn-total-{{ product.rowid }}">{{ product.price * product.quantity }}</strong>
                                    </td>

                                </tr>
                            {% endfor %}
                            <tr>
                                <td colspan="3" class="text-right"><strong>Subtotal</strong></td>
                                <td class="text-left col-sm-1 col-md-1"><strong>{{ globalOption.ecommerceConfig.currency }} <span class="cartTotal">{{ cart.total }}</span></strong></td>
                            </tr>
                            <tr>
                                <td colspan="3" class="text-right"><h5><strong>Coupon Code</strong></h5></td>
                                <td class="text-left col-sm-1 col-md-1"><input type="text"
                                                                               style="width:150px; border-radius:0"
                                                                               class="form-control"
                                                                               name="couponCode"
                                                                               id="couponCode"></td>
                            </tr>
                            <tr>
                                <td colspan="3" class="text-right"><strong>Grand Total</strong></td>
                                <td class="col-sm-1 col-md-1 text-left">
                                    <strong>{{ globalOption.ecommerceConfig.currency }} <span class="cartTotal">{{ cart.total }}</span></strong>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" class="text-right">
                                    <a href="{{ path(globalOption.subDomain ~'_webservice_product') }}"
                                       class="btn btn-info">
                                        <span class="glyphicon glyphicon-shopping-cart"></span> Continue Shopping
                                    </a>
                                </td>
                                <td class="text-left">
                                    {% if  app.user %}
                                        {% if cart.total > 0 %}
                                            <button type="submit" class="btn btn-success">
                                                Take Order <span class="glyphicon glyphicon-play"></span>
                                            </button>
                                        {% endif %}
                                    {% else %}
                                        <button type="button" class="btn search-box-bg login-preview">
                                            Login & Take Order <span class="glyphicon glyphicon-play"></span>
                                        </button>
                                    {% endif %}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </form>
        </div>
    </section>
    <div class="clearfix"></div>
    {% if globalOption.featureWidgets is defined and globalOption.featureWidgets is not empty and menu.getFeatureWidgetPositionExist('body-bottom') %}
        {% render controller("FrontendBundle:EcommerceWidget:featureTemplateWidget",{'globalOption':globalOption.id,'menu': menu.id,'position':'body-bottom'}) %}
    {% endif %}
    <div class="clearfix"></div>
    {% if menu.featureWidgets is defined and menu.featureWidgets is not empty  and menu.getFeatureWidgetPositionExist('body-bottom') %}
        <div class="container">
            {% render controller("FrontendBundle:WebsiteWidget:featureWidget",{'globalOption':globalOption.id, 'menu':menu.id,'position':'body-bottom'}) %}
        </div>
    {% endif %}
    <div class="clearfix"></div>
{% endblock %}
{% block cssBlock %}
    {% stylesheets filter='cssrewrite'
    '@FrontendBundle/Resources/public/template/desktop/css/product.css'
    '@FrontendBundle/Resources/public/template/desktop/css/medicine.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock %}
{% block javascriptBlock %}
    {{ parent() }}
    {% javascripts
    '@FrontendBundle/Resources/public/template/desktop/js/page.js'
    '@FrontendBundle/Resources/public/template/desktop/js/headerfooter.js'
    '@FrontendBundle/Resources/public/template/desktop/js/sidebar.js'
    '@FrontendBundle/Resources/public/template/desktop/js/medicine.js'
    '@FrontendBundle/Resources/public/template/desktop/js/e-commerce.js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}
{% block documentready %}
    {{ parent() }}
    sliderPageOwl(4);
{% endblock %}