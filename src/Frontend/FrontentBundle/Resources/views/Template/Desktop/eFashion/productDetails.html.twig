{% extends ':frontend/template:base.html.twig' %}
{% block body %}
    <div class="clearfix"></div>
    <section id="breadcrumb">
        <div class="container">
            <div class="row">
                <div class="col-md-10">
                    <div class="crumb" style="line-height: 34px">&nbsp;<a href="{{ path('homepage') }}">Home</a> <i>/</i><a href="{{ path('webservice_product',{'subdomain':globalOption.subdomain}) }}">Products</a><i>/</i>{% if product.masterItem is not empty %}{{ product.masterItem.name }}&nbsp;-&nbsp;{% endif %}{{ product.name }}</div>

                </div>
                <div class="col-md-2 o-margin-padding pull-right">
{#                    <div class="customNavigation" >
                        <a class="btn prev glyphicon glyphicon-chevron-left">Prev</a>
                        <a class="btn next glyphicon glyphicon-chevron-right">Next</a>
                    </div>#}
                   {# <div class="crumb" style="line-height: 34px"><a href="javascript:" id="viewed" >Your viewed items(20)</a></div>#}
                </div>
            </div>
        </div>
    </section>
    <div class="clearfix"></div>
    {% if product.masterItem.category is defined and product.masterItem.category is not empty %}
        {#<section id="viewed-item" style="display: none;">
            <div class="container">
                <div class="text-right owl-thumb-carousel-next-prev">
                    <div class="customNavigation" >
                        <a class="btn viewed-prev glyphicon glyphicon-chevron-left"></a>
                        <a class="btn viewed-next glyphicon glyphicon-chevron-right"></a>
                    </div>
                </div>
                <div id="product" class="row">
                    <div id="" class="owl-thumb-carousel viewed-product-slider">
                        {% for product in products  %}
                            <div class="item  col-xs-12 col-lg-12 ">
                                <div class="thumbnail " data-key="viewHeights" style="min-height: 205px">
                                    <div class="product-preview group list-group-image"  >
                                        <img src="{{ image(product.webPath).scaleResize(200,200) }}"   alt="">
                                        <div class="team-content">
                                            <h5 class="team-prof">
                                                <a class="btn btn-sm blue preview"  data-url="{{ path('webservice_product_modal',{'subdomain': globalOption.subDomain,'item':product.id }) }}" >Preview<i class="fa fa-link"></i></a>
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="caption">
                                        <div class="row">
                                            <div class="row-fluid">
                                                <div class="col-xs-12 col-md-12"><strike>৳&nbsp;{{ product.salesPrice|number_format }}</strike>&nbsp;<strong>৳&nbsp;{{ product.salesPrice|number_format }}</strong></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>#}
    {% endif %}
    <section id="productsX">
        <div class="container">
            <div class="row">
                <div class="col-xs-5 col-md-5" style="margin-top:25px">
                    <div class="row-fluid">
                        <div class="col-xs-12 col-md-12 o-margin-padding" style="width: 490px">
                            <ul id="pgwSlider" class="pgwSlider">
                                <li><img src="{% if product.webPath is not empty  %}{{ image(product.webPath).scaleResize(400,650) }}{% elseif product.masterItem.webPath is defined and product.masterItem.webPath is not empty %}{{ image(product.masterItem.webPath).scaleResize(400,650) }}{% endif %}" alt="" data-description="{{ product.name }}"></li>
                                {% if(product.itemGalleries) %}
                                    {% for photo in product.itemGalleries %}
                                        <li><img  src="{{ image(photo.getAbsolutePath(product.inventoryConfig.globalOption.id,product.id)).resize() }}" alt="" data-description="{{ product.name }}"></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xs-7 col-md-7" id="subItemDetails">
                    <div class="col-xs-6 col-md-6">
                        <div style="height: 37px"><h5><strong>{% if product.masterItem is not empty %}{{ product.masterItem.name }}&nbsp;-&nbsp;{% endif %}{{ product.name }}</strong></h5></div>
                        <hr>
                        <div >
                            <table class="list-table">
                                <tr><td>Price</td><td class="left-text"><strong>{{ globalOption.ecommerceConfig.currency }}&nbsp;{{ product.salesPrice|number_format }}</strong></td></tr>
                                <tr><td>Stock in</td><td class="left-text">&nbsp;:&nbsp;<strong>{{ product.quantity  }}</strong>&nbsp;{% if product.masterItem.productUnit is not empty %}{{ product.masterItem.productUnit.name }}{% endif %}</td></tr>
                                {% if product.masterItem.category is defined and product.masterItem.category is not empty %}<tr><td>Category</td><td class="left-text">&nbsp;:&nbsp;{{ product.masterItem.category.name }}</td></tr>{% endif %}
                                {% if product.gender is not empty %}<tr><td>Gender</td><td class="left-text">&nbsp;:&nbsp;{{ product.gender }}</td></tr>{% endif %}
                                {% if product.ageGroup is not empty %}<tr><td>Age Group</td><td class="left-text">&nbsp;:&nbsp;{{ product.ageGroup }}</td></tr>{% endif %}
                                {% if product.brand is not empty %}<tr><td>Brand</td><td class="left-text">&nbsp;:&nbsp;{{ product.brand.name }}</td></tr>{% endif %}
                                {% if product.country is not empty %}<tr><td>Made in</td><td class="left-text">&nbsp;:&nbsp;{{ product.country.name }}</td></tr>{% endif %}
                            </table>
                        </div>
                    </div>
                    <div class="col-xs-6 col-md-6 o-margin-padding">
                        <div class="col-xs-12 col-md-12 o-margin-padding">
                            <div class="mysharing pull-right" style="margin-bottom:0; margin-top: 20px">
                                <!-- Twitter -->
                                <a href="http://twitter.com/home?status={{ path('webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}" title="Share on Twitter" target="_blank" class="btn btn-twitter"><i class="fa fa-twitter"></i> Twitter</a>
                                <!-- Facebook -->
                                <a href="https://www.facebook.com/sharer/sharer.php?u={{ path('webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}" title="Share on Facebook" target="_blank" class="btn btn-facebook"><i class="fa fa-facebook"></i> Facebook</a>
                                <!-- Google+ -->
                                <a href="https://plus.google.com/share?url={{ path('webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}" title="Share on Google+" target="_blank" class="btn btn-googleplus"><i class="fa fa-google-plus"></i> Google+</a>
                            </div>
                        </div>

                        <div class="col-xs-12 col-md-12 o-margin-padding"> <hr></div>
                        <div class="col-xs-12 col-md-12 o-margin-padding">
                            <div class="panel panel-success">
                                <div class="panel-body">
                                    <form class="addCart">
                                        {% if product.goodsItems is not empty and product.goodsItems is defined %}
                                            {% if product.size is defined and product.size is not empty %}
                                            <div class="form-group">
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-addon" id="sizing-addon3"><span class="glyphicon glyphicon-list-alt"></span></span>
                                                    <select data-url="{{ path('webservice_product_sub_item', {'subdomain':globalOption.subDomain, 'product' : product.id }) }}" class="form-control changeSize" name="size" id="size" >
                                                        {% for goodsItem in  product.goodsItems %}
                                                            <option {% if goodsItem.masterItem == 1 %} selected="selected" {% endif %} value="{{ goodsItem.id }}" >{{ goodsItem.size.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            {% endif %}
                                            {% if globalOption.inventoryConfig.isColor == 1 and product.itemColors is not empty and product.itemColors is defined %}
                                            <div class="form-group">
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-addon" id="sizing-addon3"><span class="glyphicon glyphicon-text-background"></span></span>
                                                    <select class="form-control" name="color" >
                                                        {% for color in  product.itemColors %}
                                                            <option value="{{ color.id }}" >{{ color.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            {% endif %}
                                            <div class="form-group">
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-addon" id="sizing-addon3"><span class="glyphicon glyphicon-sort-by-order"></span></span>
                                                    <input type="number" class="form-control" id="quantity" name="quantity" min="1" max="{{ product.masterQuantity }}" value="1" placeholder="{{ product.masterQuantity }}" aria-label="Text input with multiple buttons">
                                                    <div class="input-group-btn"> <button type="button" class="btn btn-default">{{ product.masterItem.productUnit.name }}</button> </div> </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-addon" id="sizing-addon3">৳</span>
                                                    <input class="form-control" name="quantity" id="quantity" disabled="disabled" value="{{ product.salesPrice|number_format }}" aria-label="Text input">

                                                </div>
                                            </div>
                                            {% if  globalOption.ecommerceConfig.cart == 1  %}
                                            <div class="form-group pull-right">

                                                <input type="hidden" name="productImg" value="{% if product.webPath is not empty  %}{{ product.webPath }}{% elseif product.masterItem.webPath is defined and product.masterItem.webPath is not empty %}{{ product.masterItem.webPath }}{% endif %}">
                                                <button type="submit" class="btn btn-default cartSubmit" data-url="{{ path('webservice_product_cart', {'subdomain':globalOption.subDomain, 'product' : product.id,'subitem' : subitem.id }) }}" ><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span>&nbsp;Add to cart</button>
                                            </div>
                                            {% endif %}
                                        {% endif %}
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="row-fluid">
                <div class="col-xs-12 col-md-12 bhoechie-tab-container">
                    <div class="list-group list-group-horizontal bhoechie-tab-menu">
                        <a href="#" class="list-group-item active text-center">
                            <span class="glyphicon glyphicon-eye-open"></span>&nbsp;Description
                        </a>
                        <a href="#" class="list-group-item text-center">
                            <span class="glyphicon glyphicon-pencil"></span>&nbsp;Comments
                        </a>

                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 bhoechie-tab">
                        <!-- flight section -->
                        <div class="bhoechie-tab-content active">
                            <h3>Product information</h3>
                            <hr/>
                            {{ product.content|raw  }}
                            <table class="list-table">
                                {% if product.itemMetaAttributes is not empty or product.itemKeyValues is not empty %}<tr><td colspan="2" ><h4>Specification</h4></td></tr>{% endif %}
                                {% if  product.itemMetaAttributes is defined and  product.itemMetaAttributes is not empty %}
                                    {%  for attribute in product.itemMetaAttributes %}
                                    {% if attribute.value is not empty %}
                                        <tr><td>{{ attribute.itemAttribute.name }}</td><td class="left-text">&nbsp;:&nbsp;{{ attribute.value }}</td></tr>
                                    {% endif %}
                                    {% endfor %}
                                {% endif %}
                                {% if  product.itemKeyValues is defined and product.itemKeyValues is not empty %}
                                    {% for meta in product.itemKeyValues %}
                                        <tr><td>{{ meta.metaKey }}</td><td class="left-text">&nbsp;:&nbsp;{{ meta.metaValue  }}</td></tr>
                                    {% endfor %}
                                {% endif %}
                            </table>
                        </div>
                        <!-- hotel search -->
                        <div class="bhoechie-tab-content">
                            {% set paymentID = globalOption.id~'-ecommerce-product-'~product.id %}
                            {% include 'FOSCommentBundle:Thread:async.html.twig' with {'id': paymentID } %}
                        </div>
                     </div>
                </div>
            </div>
        </div>
    </section>

    {% if product.masterItem.category is not empty and product.masterItem.category is defined %}
    <section id="products">
        <div class="container">
            <div class="text-center"><h2>{{ product.masterItem.category.name }} Product</h2></div>
            <img class="img-responsive displayed" src="{{ asset('assets/template/desktop/patros/images/short.png') }}" alt="short" />
            <div class="text-right owl-thumb-carousel-next-prev">
                <div class="customNavigation" >
                    <a class="btn prev glyphicon glyphicon-chevron-left"></a>
                    <a class="btn next glyphicon glyphicon-chevron-right"></a>
                </div>
            </div>
            <div id="product" class="row">
                <div id="" class="owl-thumb-carousel product-slider">
                    {% for product in products  %}
                        <div class="col-md-12">
                            <div class="thumbnail" data-key="sameHeights" style="position:relative" >
                                <div class="product-preview group list-group-image" >
                                    <img class="img-responsive" src="{{ image(product.webPath).scaleResize(400,400) }}" data-key="featureHeights" alt="">
                                    <div class="team-content">
                                        <h3 class="team-prof">
                                            <a class="preview"  data-url="{{ path('webservice_product_modal',{'subdomain': globalOption.subDomain,'item':product.id }) }}" >Preview</a>
                                            <small><strong>Stock in</strong>&nbsp;{{ product.quantity }}&nbsp;{% if  product.masterItem.productUnit is defined and product.masterItem.productUnit is not empty %}{{ product.masterItem.productUnit.name }}{% endif %}</small>
                                        </h3>
                                    </div>
                                </div>
                                <div class="caption">
                                    <p class="group inner list-group-item-heading"><a href="{{ path('webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}">{% if product.masterItem is not empty %}{{ product.masterItem.name }}&nbsp;-&nbsp;{% endif %}{{ product.name }}</a></p>
                                    <div class="row">
                                        <div class="row-fluid">
                                            <div class="col-md-12"><strong class="currency">{{ globalOption.ecommerceConfig.currency }}</strong>&nbsp;<strike>{{ product.salesPrice|number_format }}</strike>&nbsp;<strong>{{ product.salesPrice|number_format }}</strong></div>
                                        </div>
                                        <div class="row-fluid separator-margin" >
                                            <div class="col-xs-12 col-md-12  separator" >
                                                {% if  globalOption.ecommerceConfig.cart == 1  %}
                                                    <span class="btn-add">
                                                        <i class="fa fa-shopping-cart"></i><a data-url="{{ path('webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}" href="javascript:" class="hidden-sm">Buy</a>
                                                    </span>
                                                {% endif %}
                                                    <span class="btn-details">
                                                        <i class="fa fa-list"></i><a href="{{ path('webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}" class="hidden-sm">More</a>
                                                    </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
     {% endif %}
    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content col-xs-12 col-md-12">

            </div>
        </div>
    </div>
    <script>
        var item = {{ globalOption.ecommerceConfig.owlProductColumn }};
    </script>
    <style>
        ul.pgwSlider>li img, .pgwSlider>ul>li img{
            min-height: 80px;
        }
    </style>
{% endblock %}

{% block cssBlock %}
    {% stylesheets filter='cssrewrite'
    '@FrontendBundle/Resources/public/template/desktop/css/common.css'
    '@FrontendBundle/Resources/public/template/desktop/css/product.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock  %}
{% block javascriptBlock %}
    {{ parent() }}
    {% javascripts
    '@FrontendBundle/Resources/public/template/js/product.js'
    '@FrontendBundle/Resources/public/template/js/common.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}
{% block documentready %}
    {{ parent() }}
    {#searchSubItemConfig({{ globalOption.subdomain }},{{ product.id }});#}
{% endblock %}


