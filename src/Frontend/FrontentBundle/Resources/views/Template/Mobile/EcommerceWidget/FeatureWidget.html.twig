{% if features is defined and features is not empty  %}
    {% for widget in features %}
      {% if widget.jsFeature is not empty and widget.jsFeature.slug == 'slider' %}
        <div class="container">
          <div class="row">
              <div class="owl-carousel" id="main-slider">
                  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                      <!-- Indicators -->
                      <ol class="carousel-indicators">
                          {% for slide in widget.featureWidgetItems %}
                              <li data-target="#carousel-example-generic" data-slide-to="{{ loop.index-1 }}" class="{% if loop.index == 0 %} active {% endif %}"></li>
                          {% endfor %}
                      </ol>
                      <!-- Wrapper for slides -->
                      <div class="carousel-inner">
                          {% for slide in widget.featureWidgetItems %}
                              <div class="item {% if loop.index-1 == 0 %} active {% endif %}">
                                  <img class="image" style="" src="{% if slide.feature.webPath is not empty  %} {{ image(slide.feature.webPath) }}{% endif %}" alt="...">
                                  <div class="carousel-caption caption-{{ slide.feature.captionPosition }}" style="background-color: {{ slide.feature.captionBgColor }}">
                                      <h4>{{ slide.feature.name }}</h4>
                                      <span>{{ slide.feature.content|raw }}</span>
                                      <br/>
                                      {% if slide.feature.targetTo == 'Category' %}
                                          <a class="btn btn-mini" style="background-color: {{ slide.feature.buttonBg }}" href="{{ path(globalOption.subDomain ~ '_webservice_product_category',{'id':slide.feature.category.id}) }}">{{ slide.feature.buttonName }}</a>
                                      {% elseif slide.feature.targetTo == 'Promotion' %}
                                          <a class="btn btn-mini" style="background-color: {{ slide.feature.buttonBg }}" href="{{ path(globalOption.subDomain ~ '_webservice_product_promotion',{'id':slide.feature.promotion.id}) }}">{{ slide.feature.buttonName }}</a>
                                      {% elseif slide.feature.targetTo == 'Tag' %}
                                          <a class="btn btn-mini" style="background-color: {{ slide.feature.buttonBg }}" href="{{ path(globalOption.subDomain ~ '_webservice_product_tag',{'id':slide.feature.tag.id}) }}">{{ slide.feature.buttonName }}</a>
                                      {% elseif slide.feature.targetTo == 'Discount' %}
                                          <a class="btn btn-mini" style="background-color: {{ slide.feature.buttonBg }}" href="{{ path(globalOption.subDomain ~ '_webservice_product_discount',{'id':slide.feature.discount.id}) }}">{{ slide.feature.buttonName }}</a>
                                      {% elseif slide.feature.targetTo == 'Brand' %}
                                          <a class="btn btn-mini" style="background-color: {{ slide.feature.buttonBg }}" href="{{ path(globalOption.subDomain ~ '_webservice_product_brand',{'id':slide.feature.barnd.id}) }}">{{ slide.feature.buttonName }}</a>
                                      {% endif %}
                                  </div>
                              </div>
                          {% endfor %}
                      </div>
                  </div>
              </div>
          </div>
      </div>
      {% endif %}

      {% if widget.jsFeature is not empty and widget.jsFeature.slug == 'feature' %}
          <div class="container wow slideInRight" data-wow-delay="2s">
              <div class="row">
              {% for slide in widget.featureWidgetItems %}
                  {% if(slide.feature.webPath) %}
                          {% if slide.feature.targetTo == 'Promotion' %}
                          {% set path = path(globalOption.subDomain ~ '_webservice_product_promotion',{'id':slide.feature.promotion.id}) %}
                          {% elseif slide.feature.targetTo == 'Tag' %}
                          {% set path = path(globalOption.subDomain ~ '_webservice_product_tag',{'id':slide.feature.tag.id}) %}
                          {% elseif slide.feature.targetTo == 'Discount' %}
                          {% set path = path(globalOption.subDomain ~ '_webservice_product_tag',{'id':slide.feature.discount.id}) %}
                          {% elseif slide.feature.targetTo == 'Brand' %}
                          {% set path = path(globalOption.subDomain ~ '_webservice_product') %}
                          {% else %}
                              {% set path = path(globalOption.subDomain ~ '_webservice_product') %}
                          {% endif %}
                      <div  style="overflow: hidden; margin-bottom: 15px; position: relative"  class="col-xs-12 col-md-12 feature-box ">
                          <div class="box-img">
                              {%  set imageWidth =  slide.divWidth~'%' %}
                              <img class="img-responsive img-responsive-feature"   src="{{ image(slide.feature.webPath) }}" alt="">
                              <span class="img-responsive-preview img-responsive-preview-{{  slide.feature.captionPosition }} " style="background-color: {{ slide.feature.captionBgColor }};color: {{ slide.feature.buttonBg }}; " >{{ slide.feature.name }}</span>
                          </div>
                      </div>
                  {% endif %}
              {% endfor %}
              </div>
          </div>
      {% endif %}
      {% if widget.jsFeature.slug == 'slider' %}
          {% if widget.category is defined and widget.category is not empty %}
              <div class="clearfix"></div>
              <div class="container">
                  <div class="col-md-12" >
                      <div class="bs-callout bs-callout-info">
                          <h4 class="title"><i class="fa fa-tag"></i>&nbsp;{{ widget.category.name }}</h4>
                      </div>
                  </div>
                  <div class="clearfix"></div>
                  <div id="product" class="row">
                      <div id="category-slider" class="owl-carousel wow fadeInDown" data-wow-duration="4s">
                          {% for masterProduct in  widget.category.masterProducts  %}
                          {% for product in  masterProduct.purchaseVendorItem |slice(0,12)  %}
                              <div class="outer-div">
                                  <div class="inner-div">
                                      <div id="" class="ic_container capslide_img_cont ">
                                          <div class="col-xs-12 col-md-12">
                                              <a href="javascript:" class="thumbnail">
                                                  <img src="{% if product.webPath is not empty  %}{{ image(product.webPath).scaleResize(400,400) }}{% elseif product.masterItem.webPath is defined and product.masterItem.webPath is not empty %}{{ image(product.masterItem.webPath).scaleResize(400,400) }}{% endif %}"  alt=""/>
                                              </a>
                                          </div>
                                          <div class="overlay"></div>
                                          <div class="ic_caption">
                                              <p class="title"><a href="{{ path(globalOption.subDomain ~ '_webservice_product_details',{'subdomain': globalOption.subDomain,'item':product.slug }) }}"  >{% if product.masterItem is not empty and  globalOption.ecommerceConfig.showMasterName == 1 %}{{ product.masterItem.name }}&nbsp;-&nbsp;{% endif %}{{ product.webName }}</a></p>
                                              <div class="product-short-details">
                                                  <span>{{ globalOption.ecommerceConfig.currency }}&nbsp;{% if product.discount is not empty  %}<strike>{% endif %}{{ product.salesPrice|number_format() }}{% if product.discount is not empty  %}</strike>{% endif %}{% if product.discount is not empty  %}&nbsp;{{ product.discountPrice|number_format() }}{% endif %}</span>
                                              </div>
                                              <div class="media-body">
                                                  <ul class="list-inline list-unstyled">
                                                      <li><span><i class="fa fa-dribbble" aria-hidden="true"></i>&nbsp;{% if product.brand is not empty %}{{ product.brand.name }}{% endif %}</span></li>
                                                      <li>|</li>
                                                      <li><span><span class="badge"><span class="fos-comment-count" data-fos-comment-thread-id="{{ paymentID }}">#</span></span> comments</span></li>
                                                  </ul>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          {% endfor %}
                          {% endfor %}
                      </div>
                  </div>
              </div>
          {% endif %}
      {% endif %}
          {% if widget.promotion is defined and widget.promotion is not empty %}
              <div class="clearfix"></div>
              <div class="container container-margin wow fadeInDown" data-wow-duration="4s">
                  <div class="row">
                      <div class="col-md-12" >
                          <div class="bs-callout bs-callout-info bs-callout-custom ">
                              <h4 class="feature-title"><i class="fa fa-tag"></i>&nbsp;{{ widget.promotion.name }}</h4>
                              <span  class="text-right owl-carousel-next-prev">
                                <ul class="control-box pager">
                                    <li><a data-slide="prev" href="#oneColumnCarousel" class=""><i class="glyphicon glyphicon-chevron-left"></i></a></li>
                                    <li><a data-slide="next" href="#oneColumnCarousel" class=""><i class="glyphicon glyphicon-chevron-right"></i></a></li>
                                </ul>
                            </span>
                          </div>
                      </div>
                  </div>

                  <div class="clearfix"></div>
                  <div id="product" class="row">
                      <div id="promotion-slider" class="oneCarousel">
                          <div class="col-md-10 col-md-offset-1 oneCarousel">
                              <div class="carousel slide" data-ride="carousel" data-type="multi" data-interval="3000" id="oneColumnCarousel">
                                  <div class="carousel-inner">
                                      {% for product in  widget.promotion.purchaseVendorItems |slice(0,12)  %}
                                      <div class="item  {% if loop.index-1 == 0 %} active {% endif %}">
                                          <div class="col-md-12 fadeInDown animated" data-wow-delay="0.2s" >
                                              <div class="thumbnail" data-match-height="item-promotion">
                                                  <div class="product-preview group list-group-image" >
                                                      <img class="img-responsive" src="{% if product.webPath is not empty  %}{{ image(product.webPath).scaleResize(400,400) }}{% elseif product.masterItem.webPath is defined and product.masterItem.webPath is not empty %}{{ image(product.masterItem.webPath).scaleResize(400,400) }}{% endif %}" alt="">
                                                  </div>
                                              </div>
                                              <div class="caption">
                                                  <div class="row">
                                                      <div class="row-fluid">
                                                          {% if globalOption.ecommerceConfig.showBrand == 1 %}
                                                              <p class="group inner brand text-center" ><a href="{{ path(globalOption.subDomain ~ '_webservice_product_brand',{'subdomain': globalOption.subDomain,'id':product.id }) }}"><span>{% if product.brand is not empty %}{{ product.brand.name }}{% endif %}</span></a> </p>
                                                          {% endif %}
                                                          <p class="group inner product-name text-center" ><a href="{{ path(globalOption.subDomain ~ '_webservice_product_modal',{'subdomain': globalOption.subDomain,'item':product.id }) }}"><strong>{% if product.masterItem is not empty and  globalOption.ecommerceConfig.showMasterName == 1 %}{{ product.masterItem.name }}&nbsp;-&nbsp;{% endif %}{{ product.name }}</strong></a> </p>
                                                      </div>
                                                      <div class="row-fluid">
                                                          <div class="col-xs-12 col-md-12 text-center"><strong class="currency">{{ globalOption.ecommerceConfig.currency }}&nbsp;{% if product.discount is not empty  %}<strike>{% endif %}{{ product.salesPrice|number_format() }}{% if product.discount is not empty  %}</strike>{% endif %}{% if product.discount is not empty  %}&nbsp;{{ product.discountPrice|number_format() }}{% endif %}</strong></div>
                                                      </div>
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                      {% endfor %}
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          {% endif %}
          {% if widget.featureCategory is defined and widget.featureCategory is not empty %}
              <div class="container  wow fadeInDown" data-wow-offset="300" >
                  <div class="row">
                      <div class="col-md-12" >
                          <div class="bs-callout bs-callout-info bs-callout-custom ">
                              <h4 class="feature-title"><i class="fa fa-dribbble"></i>&nbsp;Browser By Categories</h4>
                              <span  class="text-right owl-carousel-next-prev">
                                <ul class="control-box pager">
                                    <li><a data-slide="prev" href="#TwoColumnCarousel" class=""><i class="glyphicon glyphicon-chevron-left"></i></a></li>
                                    <li><a data-slide="next" href="#TwoColumnCarousel" class=""><i class="glyphicon glyphicon-chevron-right"></i></a></li>
                                </ul>
                            </span>
                          </div>
                      </div>
                  </div>
                  <div class="clearfix"></div>
                  <div class="row">
                      <div id="product" class="col-md-12 twoCarousel">
                          <div class="slide carousel" id="TwoColumnCarousel">
                              <div class="carousel-inner">
                                  {% for category in  widget.globalOption.featureCategories  %}
                                      <div class="item  {% if loop.index-1 == 0 %} active {% endif %}">
                                          <div class="col-xs-6">
                                              <a class="thumbnail" href="{{ path(globalOption.subDomain ~ '_webservice_product_category',{'subdomain': globalOption.subDomain,'id':category.id }) }}">
                                                  <img class="img-responsive" src="{{ image(category.webPath).resize(250,200, 'black') }}" alt="">
                                              </a>
                                              <div class="caption">
                                                  <p class="group inner product-name text-center" ><a href="{{ path(globalOption.subDomain ~ '_webservice_product_category',{'subdomain': globalOption.subDomain,'id':category.id }) }}"><strong>{{ category.category.name }}</strong></a> </p>
                                              </div>
                                          </div>
                                      </div>
                                  {% endfor %}
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          {% endif %}

        <style>

            .bs-callout-custom {
                padding: 5px;
            }
            .feature-title {
                text-align: left;
                float: left;
                line-height: 30px;
                margin-bottom: 0!important;
            }
            .control-box{
                text-align: right;
                width: 100%;
                list-style: none;
                padding-left: 0;
                margin: 0;
            }
            .control-box ul{
                list-style: none;
                margin: 0;
                padding: 0;
            }
            .control-box li>a, .control-box li>span {
                display: inline-block;
                padding: 5px 14px;
                background-color: #fff;
                border: 1px solid #ddd;
                border-radius: 1px;
            }

            .img-responsive-preview {

                position: absolute;
                top: 50%;
                left: 50%;
                margin-right: -50%;
                transform: translate(-50%, -50%);
                padding: 5px;
                opacity: 0.8;
                z-index: 9;
                color: #ffffff;
                background-color: #0b0e23;
                float: left;
                font-size:20px;
            }

            .img-responsive-preview-top-left {
                top: 5%;
                left: 23%;
            }
            .img-responsive-preview-top-center {
                top: 5%;
                left: 50%;
                margin-right: -50%;
                transform: translate(-50%, -50%);
            }

            .img-responsive-preview-top-right {
                top: 20%;
                left: 95%;
                margin-right: -100%;
                transform: translate(-100%, -100%);

            }
            .img-responsive-preview-bottom-left {
                top: 95%;
                left: 23%;
            }
            .img-responsive-preview-bottom-center {
                top: 95%;
                left: 50%;
                margin-right: -50%;
                transform: translate(-50%, -50%);
            }

            .img-responsive-preview-bottom-right {
                top: 95%;
                left: 95%;
                margin-right: -100%;
                transform: translate(-100%, -100%);

            }

        </style>
        {% if widget.featureBrand is defined and widget.featureBrand is not empty %}
            <div class="container wow fadeInDown" data-wow-delay="2s" >
                <div class="row">
                    <div class="col-md-12" >
                        <div class="bs-callout bs-callout-info bs-callout-custom ">
                            <h4 class="feature-title"><i class="fa fa-dribbble"></i>&nbsp;Browser By Brands</h4>
                            <span  class="text-right owl-carousel-next-prev">
                                <ul class="control-box pager">
                                    <li><a data-slide="prev" href="#ThreeColumnCarousel" class=""><i class="glyphicon glyphicon-chevron-left"></i></a></li>
                                    <li><a data-slide="next" href="#ThreeColumnCarousel" class=""><i class="glyphicon glyphicon-chevron-right"></i></a></li>
                                </ul>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="row">
                    <div id="product" class="col-md-12 threeCarousel">
                        <div class="slide carousel" id="ThreeColumnCarousel">
                            <div class="carousel-inner">
                                {% for brand in  widget.globalOption.featureBrands  %}
                                <div class="item  {% if loop.index-1 == 0 %} active {% endif %}">
                                    <div class="col-lg-4 col-xs-4 col-md-4 col-sm-4 ">
                                        <a class="thumbnail" href="{{ path(globalOption.subDomain ~ '_webservice_product_brand',{'subdomain': globalOption.subDomain,'id':brand.id }) }}">
                                            <img class="img-responsive" src="{{ image(brand.webPath).resize(150,120) }}" alt="">
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
   {# {% endif %}#}
    {% endfor %}
{% endif %}
