{% extends 'template/base.html.twig' %}
{% block body %}
    <div class="bannerPane  bannerPane-business-locaton"  {% if details.webPath() is defined and details.webPath() is not empty %} style="background-repeat:no-repeat!important; background-position:center center!important;background:url('{{ image(details.webPath()).resize() }}')" {% endif %} >
        <div class="overlay"></div>
        <div class="s-banner-content">
            <div><img width="100" src="{{ image(globalOption.templateCustomize.webPath('logo')).resize() }}" /></div>
            Contact
        </div>
    </div>
    <div id="content" class="content-margin" >

        <!-- content -->
        <div class="row">
            {% if globalOption.contactPage.isBaseInformation == 1 and globalOption.contactPage.content is defined and globalOption.contactPage.content is not null %}
                {{ globalOption.contactPage.content }}
                <hr>
            {% endif %}
        </div>

        <div class="row" style="overflow: hidden">
            {% if globalOption.contactPage.isMap == 1 and globalOption.contactPage.googleMap is defined and globalOption.contactPage.googleMap is not null %}
                {{ globalOption.contactPage.googleMap|raw }}
                <hr>
            {% endif %}
        </div>

        <div class="row">
            <p>
                <strong>Office</strong><br>
                Address: {{ globalOption.contactPage.address1 }}<br>
                {% if globalOption.contactPage.thana is defined and globalOption.contactPage.thana %}
                    {{ globalOption.contactPage.thana.name }}<br>
                {% endif %}
                {% if globalOption.contactPage.district is defined and globalOption.contactPage.district %}
                    {{ globalOption.contactPage.district.name }} {% endif %}-{{ globalOption.contactPage.postalCode }}<br>
            </p>
            {% if globalOption.contactPage.startHour %}
                <p>
                    <strong>Office hour</strong><br>
                    {{ globalOption.contactPage.startHour }} To {{ globalOption.contactPage.endHour }}
                </p>
            {% endif %}
            <p><strong>Weekly off day</strong><br>{{ globalOption.contactPage.weeklyOffDay }}</p>
            <p>
                <strong>Contact Information</strong><br>
                <p>{{ globalOption.contactPage.contactPerson|raw }}</p>
                {% if globalOption.contactPage.designation %}<p>{{ globalOption.contactPage.designation|raw }}</p>{% endif %}
                <p><i class="fa fa-mobile-phone"></i>&nbsp;+ 088&nbsp;<a href="tel:+ 088 {{ globalOption.mobile }}" class="contact-call">{{ globalOption.mobile }}</a></p>
                {% if  globalOption.email is not empty %}<p><i class="fa fa-envelope"></i>&nbsp;<a href="mailto:{{ globalOption.email }}" class="contact-email">{{ globalOption.email }}</a></p>{% endif %}
                {% if(globalOption.contactPage.additionalPhone) %}<p><i class="fa fa-phone-square"></i>&nbsp;+02 {{ globalOption.contactPage.additionalPhone|raw }}</p>{% endif %}
                {% if(globalOption.contactPage.fax) %}<p><i class="fa fa-fax"></i>&nbsp;Fax: + 02{{ globalOption.contactPage.fax|raw }}</p>{% endif %}
                {% if(globalOption.contactPage.additionalEmail) %}<p><i class="fa fa-envelope"></i>&nbsp;<a href="mailto:{{ globalOption.contactPage.additionalEmail|raw }}">{{ globalOption.contactPage.additionalEmail|raw }}</a></p>{% endif %}

            </p>
        </div>
        {% if globalOption.contactPage.isBranch == 1 and globalOption.branches is not empty %}
            <br/>
            <h3><strong>Our Branches</strong></h3>
            <br/>
        {% for  details in globalOption.branches %}
            <article>
                <div class="list">
                    <ul class="ul-list">
                        <li><strong><span><i class="fa fa-building"></i></span>{{ details.name }}</strong></li>
                        <li><span><i class="fa fa-home"></i></span>{{ details.address|raw }}</li>
                        <li><span><i class="fa fa-user"></i></span>{{ details.contactPerson }}, <em>{{ details.designation }}</em></li>
                        <li><span><i class="fa fa-mobile-phone"></i></span><a href="tel:+ 088 {{ details.mobile|raw }}" class="contact-call">+ 088 {{ details.mobile|raw }}</a></li>
                        {% if(details.phone) %}<li><span><i class="fa fa-phone-square"></i></span>+ {{ details.phone|raw }}</li>{% endif %}
                        {% if(details.fax) %}<li><span><i class="fa fa-phone"></i></span>+ {{ details.fax|raw }}</li>{% endif %}
                        {% if(details.email) %}<li><span><i class="fa fa-envelope-o"></i></span>{{ details.email|raw }}</li>{% endif %}
                    </ul>
                    <br />
                    <p class="center"><a href="{{ path(globalOption.subDomain ~ '_webservice_module_page',{'subdomain': globalOption.subDomain,'module': 'branch','slug':details.slug }) }}" class="o-buttons green"><i class="fa fa-map-marker"></i> Direction</a></p>
                </div>
            </article>
        {% endfor %}
        {% endif %}
        {% if(globalOption.contactPage.isContactForm == 1) %}
        <div class="row">
            <div class="contact-form no-bottom">
                <h4>Send us an email!</h4>
                <div class="formSuccessMessageWrap loading" id="formSuccessMessageWrap">
                    <div class="big-notification blue-notification">
                        <a href="#" class="close-big-notification">x</a>
                        <p>Your message has been successfuly sent. Please allow up to 48 hours for a reply! Thank you!</p>
                    </div>
                </div>

                <form action="" method="post" class="contactForm" id="contactForm">
                    <fieldset>

                        <div class="formFieldWrap">
                            <label class="field-title contactNameField" for="contactNameField">Name:<span>(required)</span></label>
                            <input type="text" name="name" value="" class="contactField requiredField" id="contactNameField"/>
                        </div>
                        <div class="formFieldWrap">
                            <label class="field-title" for="">Mobile:</label>
                            <input type="text" name="mobile" value="" class="contactField requiredField requiredEmailField mobile" id="mobile"/>
                        </div>
                        {% if(globalOption.contactPage.askForEmail == 1) %}
                            <div class="formFieldWrap">
                                <label class="field-title contactEmailField" for="contactEmailField">Email: <span>(optional)</span></label>
                                <input type="text" name="email" value="" class="contactField requiredField" id="email"/>
                            </div>
                        {% endif %}
                        <div class="formTextareaWrap">
                            <label class="field-title contactMessageTextarea" for="contactMessageTextarea">Message: <span>(required)</span></label>
                            <textarea name="content" class="contactTextarea requiredField" id="contactMessageTextarea"></textarea>
                        </div>
                        <input type="hidden" name="globalOption" id="globalOption" value="{{ globalOption.id }}">
                        <div class="formSubmitButtonErrorsWrap">
                            <input type="submit" class="o-buttons green" id="contactSubmitButton" value="SUBMIT" data-formId="contactForm"/>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
        {% endif %}
    </div>
    <style>
        .contact-person{
            color: #000033;
            cursor: none;
        }
        .blue-notification{
            display: none;
        }

    </style>

{% endblock %}

{% block documentready %}

    {{ parent() }}


    {#<script>#}

    function isValidEmailAddress(emailAddress) {
    var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
    return pattern.test(emailAddress);
    };

    $('#email').focusout(function(){

    var emil=$('#email').val();

    if( ! isValidEmailAddress( emil ) ) {
    $('.contactEmailField span').val('').addClass('error-input');
    $('.contactEmailField span').html(emil+' is not valid e-mail address.');
    }else{
    $('.contactEmailField span').removeClass('error-input');
    $('.contactEmailField span').html('');
    }

    });


    $('#contactForm').validate({

    rules: {
    name: {
    required: true
    },
    mobile: {
    required: true
    },
    content: {
    required: true
    },
    },
    messages:{
    name:{
    required: "Please enter your name"
    },
    mobile:{
    required: "Please enter your cell phone number"
    },
    content:{
    required: "Please enter your comments"
    }
    },
    submitHandler: function(form) {

    $.ajax({
    url:'{{ path('mobile_email_receive',{'subdomain': globalOption.subDomain }) }}',
    type: "POST",
    beforeSend: function() {
    $('.loading').show();
    },
    data: $('form#contactForm').serialize(),
    success: function(response) {
    if(response == 'success'){
        $('.loading').fadeOut(3000);
        $('#formSuccessMessageWrap').show();
        $('.blue-notification').fadeOut(5000);
        $('fieldset').closest('form').find("input[type=text], textarea").val("");
    }

    }
    });
    }

    });


{% endblock %}


