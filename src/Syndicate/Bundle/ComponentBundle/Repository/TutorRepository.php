<?php
/**
 * Created by PhpStorm.
 * User: shafiq
 * Date: 9/28/15
 * Time: 10:56 AM
 */

namespace Syndicate\Bundle\ComponentBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Syndicate\Bundle\ComponentBundle\Entity\Tutor;

/**
 * TutorRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TutorRepository extends EntityRepository
{

    public function insertVendor($id)
    {
        $em = $this->_em;
        $entity = $em->getRepository('SyndicateComponentBundle:Tutor')->findOneBy(array('user'=>$id));
        if(empty($entity)){

            $entity = new Tutor();
            $user  = $em->getRepository('UserBundle:User')->find($id);
            $entity->setUser($user);
            $entity->setEmail($user->getEmail());
            $entity->setMobile($user->getProfile()->getMpbile());
            $entity->setUser($user);
            $em->persist($entity);
            $em->flush();

        }

    }

}